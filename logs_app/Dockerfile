FROM node

# В случае использования этой команды, все последующие образения к директории будут считаться отсюда
# То есть . в COPY будет копировать уже в эту папку, так как она выбрана как рабочая директория
WORKDIR /app

COPY package.json /app

# Запускается при ПОСТРОЕНИИ (создании) образам
# Если мы не меняем node_modules, мы берём их из кеша
RUN npm install

COPY . .

ENV PORT 4200

EXPOSE $PORT

VOLUME [ "/app/data" ]

# Используется при ЗАПУСКЕ образа
CMD ["node", "app.js"]